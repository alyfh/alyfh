<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>3d风火轮（导入即可使用）-jq22.com</title>
<script src="http://libs.baidu.com/jquery/1.11.3/jquery.min.js"></script>
<style>
.container{
  height: 100%;
}
.content{
  height: 100%;
  transition: all 0.3s ease-in-out;
  overflow: hidden;
}
/* 头部的导航栏 */
.magazine-show-head{
  padding-left: 20px;
  height: 30px;
  line-height: 30px;
  font-size: 12px;
  background: rgb(220,220,220);
}
.magazine-show-head .item{
  display: inline-block;
  color: rgb(100,100,100);
  cursor: pointer;
}
.magazine-show-head .item-index:hover{
  color: rgb(26, 129, 225);
}
.magazine-show-head .item-magazine-show{
  color: rgb(26, 129, 225);
}

/* 3d旋转 */

/* 舞台 */
.stage{
  perspective: 2000px;/* 视距 */
}
/* 容器 */
.stage .box{
  position: relative;
  width: 20%;
  height: 200px;
  margin: 100px auto;
  transform-style: preserve-3d; /* 3D声明 */
  transition: all 0.5s ease-in;
}
img{
  position: absolute;
  width: 100%;
  transition: all 0.5s ease-in;
}</style>
</head>
<body>
<!-- 最外层的盒子 -->
   <div class="container">
    <!-- 内容部分 -->
    <div class="content">
      <!-- 3d旋转 -->
      <div class="stage">
        <div class="box">
          <img src="http://www.jq22.com/img/cs/500x500-1.png" class="img-item">
          <img src="http://www.jq22.com/img/cs/500x500-2.png" class="img-item">
          <img src="http://www.jq22.com/img/cs/500x500-3.png" class="img-item">
          <img src="http://www.jq22.com/img/cs/500x500-4.png" class="img-item">
          <img src="http://www.jq22.com/img/cs/500x500-5.png" class="img-item">
          <img src="http://www.jq22.com/img/cs/500x500-6.png" class="img-item">
          <img src="http://www.jq22.com/img/cs/500x500-7.png" class="img-item">
          <img src="http://www.jq22.com/img/cs/500x500-8.png" class="img-item">
          <img src="http://www.jq22.com/img/cs/500x500-9.png" class="img-item">
        </div>
      </div>
    </div>
  </div>

<script>
// 杂志秀模块
(function(){

  // 旋转动画
  rotate();
  function rotate(){
    // 得到参数
    var imgs = document.getElementsByClassName('img-item');
    var width = imgs[0].clientWidth;
    //得到图片到圆心的距离 + 20间隔
    var distance = (width/2)/Math.tan(20 / 180 * Math.PI) + 20;
    // 外盒子的选择参数
    var y = 1;
    // 循环图片 得到图片位置
    for(var i=0,len=imgs.length;i<len;i++){
        imgs[i].style.transform = " rotateY("+i*40+"deg) translateZ("+ distance +"px)";
        !function(i){
          imgs[i].onclick = function(){
            var box = document.getElementsByClassName("box")[0];
            box.style.transform = " rotateY("+y*40+"deg)";
            for (var z = 0,zlen = imgs.length; z < zlen; z++) {
                var x = (z*40 + 40);
                if(x === 360){
                    x = 0;
                }
                imgs[z].style.transform = " rotateY("+x+"deg) translateZ("+ distance +"px)";
            }
            y++;
          }
        }(i);
    }
  }

  // 监听页面的变化
  window.addEventListener('resize', function() {
    rotate();
  })
})()
</script>

</body>
</html>
